(()=>{"use strict";var e=document.querySelector("#card-template").content;function t(e){e.remove()}function n(e){e.classList.toggle("card__like-button_is-active")}function o(t,n,o,r){var c=e.querySelector(".places__item").cloneNode(!0),u=c.querySelector(".card__image");c.id=t.id,u.alt=t.name,u.src=t.link,c.querySelector(".card__title").textContent=t.name,c.querySelector(".card__delete-button").addEventListener("click",(function(){return n(c)}));var i=c.querySelector(".card__like-button");return i.addEventListener("click",(function(){return o(i)})),u.addEventListener("click",(function(){return r(t)})),c}function r(e){e.classList.add("popup_is-opened"),document.addEventListener("keydown",u),e.addEventListener("click",i)}function c(e){e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",u),e.removeEventListener("click",i)}function u(e){"Escape"===e.key&&c(document.querySelector(".popup_is-opened"))}function i(e){e.currentTarget===e.target&&c(document.querySelector(".popup_is-opened"))}var a=document.querySelector(".places__list"),p=document.querySelector(".profile__edit-button"),d=document.querySelector(".popup_type_edit"),l=document.querySelector(".profile__add-button"),s=document.querySelector(".popup_type_new-card"),_=document.querySelectorAll(".popup"),m=document.forms["edit-profile"],f=document.querySelector(".profile__title"),v=m.querySelector(".popup__input_type_name"),y=document.querySelector(".profile__description"),q=m.querySelector(".popup__input_type_description"),S=document.forms["new-place"],k=S.querySelector(".popup__input_type_card-name"),L=S.querySelector(".popup__input_type_url"),h=document.querySelector(".popup_type_image"),E=document.querySelector(".popup__caption"),g=document.querySelector(".popup__image"),b=document.querySelector(".profile__image");function x(e){E.textContent=e.name,g.src=e.link,g.alt=e.name,r(h)}p.addEventListener("click",(function(){r(d)})),_.forEach((function(e){e.addEventListener("click",(function(t){t.target.classList.contains("popup__close")&&c(e)}))})),v.value=f.textContent,q.value=y.textContent,m.addEventListener("submit",(function(e){e.preventDefault(),f.textContent=v.value,y.textContent=q.value,c(d)})),l.addEventListener("click",(function(){r(s)})),S.addEventListener("submit",(function(e){e.preventDefault();var r=o({name:k.value,link:L.value},t,n,x);a.prepend(r),S.reset(),c(s)})),Promise.all([fetch("https://mesto.nomoreparties.co/v1/wff-cohort-12/cards",{headers:{authorization:"806a3e23-dd82-4545-a496-6ff755848ded"}}).then((function(e){return e.json()})),fetch("https://mesto.nomoreparties.co/v1/wff-cohort-12/users/me",{headers:{authorization:"806a3e23-dd82-4545-a496-6ff755848ded"}}).then((function(e){return e.json()}))]).then((function(e){var r,c=e[0];r=e[1],f.textContent=r.name,y.textContent=r.about,b.style.backgroundImage="url(".concat(r.avatar,")"),function(e){e.forEach((function(e){var r=o(e,t,n,x);a.append(r)}))}(c)}))})();